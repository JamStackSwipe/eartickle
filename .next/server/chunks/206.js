exports.id=206,exports.ids=[206],exports.modules={3414:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var s=r(997);r(2636);var a=r(2364);let l=function({Component:e,pageProps:t}){return s.jsx(a.H,{children:s.jsx(e,{...t})})}},2364:(e,t,r)=>{"use strict";r.d(t,{H:()=>o,a:()=>n});var s=r(997),a=r(6689),l=r(1842);let i=(0,a.createContext)(),o=({children:e})=>{let[t,r]=(0,a.useState)(null),[o,n]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{l.O.auth.getSession().then(({data:{session:e}})=>{r(e?.user??null),n(!1)});let{data:e}=l.O.auth.onAuthStateChange((e,t)=>{r(t?.user??null)});return()=>{e?.subscription.unsubscribe()}},[]),s.jsx(i.Provider,{value:{user:t},children:!o&&e})},n=()=>{let e=(0,a.useContext)(i);if(!e)throw Error("useUser must be used within an AuthProvider");return e}},3322:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{Z:()=>u});var a=r(997),l=r(6689),i=r(1842),o=r(6201),n=r(7395),c=e([o]);o=(c.then?(await c)():c)[0];let d=[{amount:5,label:"⚡ Boost 5",color:"bg-yellow-400 text-black hover:bg-yellow-500"},{amount:10,label:"\uD83D\uDE80 Mega 10",color:"bg-pink-500 text-white hover:bg-pink-600"},{amount:25,label:"\uD83C\uDF1F Super 25",color:"bg-purple-600 text-white hover:bg-purple-700"}],u=({songId:e,userId:t,artistId:r})=>{let[s,c]=(0,l.useState)(!1),u=async(s,a)=>{c(!0);try{let{data:l}=await i.O.auth.getSession(),d=l?.session?.access_token;if(!d){o.default.error("Not logged in"),c(!1);return}let u=await fetch("/api/boost-tickles",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify({user_id:t,artist_id:r,song_id:e,amount:s,reason:a})}),h=await u.json();if(u.ok){o.default.success(`${s} Tickles used!`),(0,n.Ow)();let t=document.querySelector(`[data-song-id="${e}"]`);t&&(t.classList.add("animate-boost"),setTimeout(()=>t.classList.remove("animate-boost"),1e3)),window.dispatchEvent(new CustomEvent("ticklesUpdated"))}else o.default.error(h.error||"Boost failed")}catch(e){o.default.error("Unexpected error"),console.error("❌ BoostTickles error:",e)}c(!1)};return a.jsx("div",{className:"mt-3 flex justify-center",children:a.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:d.map(({amount:e,label:t,color:r})=>a.jsx("button",{onClick:()=>u(e,t),disabled:s,className:`px-3 py-1 text-sm rounded-full font-semibold transition ${r} ${s?"opacity-50 cursor-not-allowed":""}`,children:t},e))})})};s()}catch(e){s(e)}})},6252:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var s=r(997),a=r(1664),l=r.n(a);let i=()=>s.jsx("footer",{className:"w-full bg-black text-gray-400 text-xs py-4 px-4 text-center mt-auto",children:(0,s.jsxs)("div",{className:"space-x-3",children:[s.jsx(l(),{href:"/privacy",className:"hover:underline",children:"\uD83D\uDD12 Privacy"}),s.jsx(l(),{href:"/terms",className:"hover:underline",children:"\uD83D\uDCC4 Terms"}),s.jsx(l(),{href:"/about",className:"hover:underline",children:"\uD83D\uDCD6 About"}),s.jsx(l(),{href:"/flavors",className:"hover:underline",children:"\uD83C\uDFA8 Flavors"}),s.jsx("a",{href:"https://github.com/JamStackSwipe/eartickle/wiki",target:"_blank",rel:"noreferrer",className:"hover:underline",children:"\uD83D\uDCD8 Wiki"}),s.jsx("a",{href:"https://github.com/JamStackSwipe/eartickle",target:"_blank",rel:"noreferrer",className:"hover:underline",children:"\uD83D\uDD17 GitHub"})]})})},2813:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var s=r(997),a=r(6689),l=r(1664),i=r.n(l),o=r(1163),n=r(1842),c=r(2364);let d=()=>{let{user:e}=(0,c.a)(),t=(0,o.useRouter)(),[r,l]=(0,a.useState)(!1),[d,u]=(0,a.useState)(!1),h=(0,a.useRef)(null),m=async()=>{await n.O.auth.signOut(),t.push("/login")},x=()=>{clearTimeout(h.current),l(!0)},f=()=>{h.current=setTimeout(()=>{l(!1)},300)};return(0,a.useEffect)(()=>()=>clearTimeout(h.current),[]),(0,s.jsxs)("header",{className:"w-full px-4 py-3 bg-black text-white flex justify-between items-center shadow relative z-10",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 cursor-pointer",onClick:()=>{t.push(e?"/swipe":"/login")},children:[s.jsx("img",{src:"/logo-icon.png",alt:"EarTickle Icon",className:"w-8 h-8 object-contain"}),(0,s.jsxs)("div",{className:"flex flex-col",children:[s.jsx("div",{className:"text-xl font-bold text-white hover:text-gray-300",children:"Ear Tickle"}),s.jsx("div",{className:"text-xs text-gray-400 -mt-1 ml-1",children:"Scroll. Stack. Play."})]})]}),e&&(0,s.jsxs)("nav",{className:"flex items-center space-x-4 text-sm relative",children:[(0,s.jsxs)("div",{className:"hidden sm:flex items-center space-x-4",children:[s.jsx(i(),{href:"/swipe",className:"hover:underline text-white",children:"Swipe"}),s.jsx(i(),{href:"/jamstack",className:"hover:underline text-white",children:"\uD83C\uDFB6 JamStack"}),s.jsx(i(),{href:"/charts",className:"hover:underline text-white",children:"\uD83D\uDCC8 Charts"}),s.jsx(i(),{href:"/rewards",className:"hover:underline text-white",children:"\uD83C\uDF81 Rewards"}),s.jsx(i(),{href:"/upload",className:"hover:underline text-white",children:"Upload"})]}),(0,s.jsxs)("div",{className:"relative hidden sm:block",onMouseEnter:x,onMouseLeave:f,children:[s.jsx("img",{src:e.user_metadata?.avatar_url||"/default-avatar.png",alt:"avatar",onClick:()=>l(!r),className:"w-8 h-8 rounded-full border border-white cursor-pointer"}),r&&(0,s.jsxs)("div",{onMouseEnter:x,onMouseLeave:f,className:"absolute right-0 mt-2 w-48 bg-white text-black rounded shadow-lg text-sm overflow-hidden z-[9999]",children:[s.jsx(i(),{href:"/profile",className:"block px-4 py-2 hover:bg-gray-100",children:"\uD83D\uDC64 My Profile"}),s.jsx(i(),{href:`/artist/${e.id}`,className:"block px-4 py-2 hover:bg-gray-100",children:"\uD83C\uDFA4 My Artist Page"}),s.jsx(i(),{href:"/settings",className:"block px-4 py-2 hover:bg-gray-100",children:"⚙️ Settings"}),s.jsx(i(),{href:"/privacy",className:"block px-4 py-2 hover:bg-gray-100",children:"\uD83D\uDD12 Privacy"}),s.jsx(i(),{href:"/terms",className:"block px-4 py-2 hover:bg-gray-100",children:"\uD83D\uDCC4 Terms"}),s.jsx("button",{onClick:m,className:"w-full text-left px-4 py-2 hover:bg-gray-100",children:"\uD83D\uDEAA Logout"})]})]}),s.jsx("div",{className:"sm:hidden",children:s.jsx("button",{onClick:()=>u(!d),className:"focus:outline-none",children:"☰"})})]}),d&&s.jsx("div",{className:"absolute top-full right-0 w-full bg-black text-white sm:hidden z-50 mt-2 shadow-lg rounded",children:(0,s.jsxs)("div",{className:"flex flex-col px-4 py-2 space-y-2 text-sm",children:[s.jsx(i(),{href:"/swipe",onClick:()=>u(!1),children:"Swipe"}),s.jsx(i(),{href:"/upload",onClick:()=>u(!1),children:"Upload"}),s.jsx(i(),{href:"/jamstack",onClick:()=>u(!1),children:"\uD83C\uDFB6 JamStack"}),s.jsx(i(),{href:"/rewards",onClick:()=>u(!1),children:"\uD83C\uDF81 Rewards"}),s.jsx(i(),{href:"/charts",onClick:()=>u(!1),children:"\uD83D\uDCC8 Charts"}),s.jsx(i(),{href:"/profile",onClick:()=>u(!1),children:"\uD83D\uDC64 My Profile"}),s.jsx(i(),{href:`/artist/${e.id}`,onClick:()=>u(!1),children:"\uD83C\uDFA4 My Artist Page"}),s.jsx(i(),{href:"/settings",onClick:()=>u(!1),children:"⚙️ Settings"}),s.jsx(i(),{href:"/privacy",onClick:()=>u(!1),children:"\uD83D\uDD12 Privacy"}),s.jsx(i(),{href:"/terms",onClick:()=>u(!1),children:"\uD83D\uDCC4 Terms"}),s.jsx("button",{onClick:()=>{m(),u(!1)},children:"\uD83D\uDEAA Logout"})]})})]})}},3146:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{Z:()=>m});var a=r(997),l=r(6689),i=r(9332),o=r(1842),n=r(2364),c=r(7395),d=r(6201),u=e([d]);d=(u.then?(await u)():u)[0];let h=["\uD83D\uDD25","\uD83D\uDC96","\uD83D\uDE2D","\uD83C\uDFAF"],m=({song:e})=>{let{user:t}=(0,n.a)(),[r,s]=(0,l.useState)({}),[u,m]=(0,l.useState)(null),[x,f]=(0,l.useState)({}),[p,D]=(0,l.useState)(!0),[g,b]=(0,l.useState)(!1),[j,w]=(0,l.useState)(!1),k=(0,i.useRouter)(),v=(0,l.useCallback)(async()=>{D(!0);try{let[{data:r},{data:a},{data:l},{data:i}]=await Promise.all([o.O.from("song_reactions").select("emoji").eq("song_id",e.id),t?o.O.from("profiles").select("tickle_balance").eq("id",t.id).maybeSingle():{data:null},t?o.O.from("song_reactions").select("emoji").eq("song_id",e.id).eq("user_id",t.id):{data:[]},t?o.O.from("jamstacksongs").select("id").eq("user_id",t.id).eq("song_id",e.id).maybeSingle():{data:null}]),n={};r?.forEach(({emoji:e})=>{n[e]=(n[e]||0)+1});let c={};l?.forEach(({emoji:e})=>{c[e]=!0}),s(n),f(c),m(a?.tickle_balance??0),b(!!i)}catch(e){console.error("❌ Load stats error:",e)}finally{D(!1)}},[e.id,t]);(0,l.useEffect)(()=>{v()},[v]),(0,l.useEffect)(()=>{let e=()=>v();return window.addEventListener("ticklesUpdated",e),()=>window.removeEventListener("ticklesUpdated",e)},[v]);let y=async(r,a)=>{if(a.stopPropagation(),!t)return d.default.error("Login to react");if(x[r])return(0,d.default)("Already reacted");let{error:l}=await o.O.from("song_reactions").insert([{user_id:t.id,song_id:e.id,emoji:r}]);l?d.default.error("Failed to react"):(s(e=>({...e,[r]:(e[r]||0)+1})),f(e=>({...e,[r]:!0})),d.default.success(`Reacted with ${r}!`))},C=async r=>{if(r.stopPropagation(),!t)return d.default.error("Login required");if((u??0)<1)return d.default.error("Not enough Tickles");if(e.user_id===t.id)return d.default.error("You can't send Tickles to yourself!");let{data:s,error:a}=await o.O.auth.getSession();if(a||!s?.session?.access_token)return d.default.error("Authorization failed");let l=s.session.access_token;try{let t=await fetch("/api/send-tickle",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify({artist_id:e.user_id,song_id:e.id,emoji:"\uD83C\uDF81"})}),r=await t.json();t.ok?((0,c.e9)(),d.default.success("1 Tickle sent!"),m(e=>(e||0)-1),v()):d.default.error(r.error||"Failed to send tickle")}catch(e){d.default.error("Error sending tickle: Endpoint may be unavailable"),console.error("Send tickle error:",e)}},S=async t=>{t.stopPropagation();let r=`${window.location.origin}/song/${e.id}`,s={title:`${e.title} by ${e.artist}`,text:"Check out this awesome song on EarTickle!",url:r};try{navigator.share&&navigator.canShare(s)?await navigator.share(s):(await navigator.clipboard.writeText(r),d.default.success("Song link copied to clipboard!"))}catch(e){console.error("Share error:",e),d.default.error("Failed to share song")}},N=async r=>{if(r.stopPropagation(),!t)return d.default.error("Login to add to Jam Stack");w(!0);try{if(g){let{error:r}=await o.O.from("jamstacksongs").delete().eq("user_id",t.id).eq("song_id",e.id);r?d.default.error("Failed to remove from Jam Stack"):(s(e=>({...e,jams:(e.jams||0)-1})),b(!1),d.default.success("Removed from Jam Stack!"))}else{let{error:r}=await o.O.from("jamstacksongs").insert([{user_id:t.id,song_id:e.id}]);r?d.default.error("Failed to add to Jam Stack"):(s(e=>({...e,jams:(e.jams||0)+1})),b(!0),d.default.success("Added to Jam Stack!"))}}catch(e){d.default.error("Jam toggle failed"),console.error("Jam toggle error:",e)}finally{w(!1)}},_=e=>{e.stopPropagation(),k.push("/rewards")};return p?a.jsx("div",{className:"w-full mt-2 text-sm text-center",children:"Loading reactions..."}):(0,a.jsxs)("div",{className:"w-full mt-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-center items-center gap-6 text-2xl font-semibold mb-3",children:[h.map(e=>(0,a.jsxs)("button",{onClick:t=>y(e,t),disabled:x[e],className:`flex items-center gap-1 ${x[e]?"opacity-50":"hover:scale-110"} transition-transform`,children:[a.jsx("span",{children:e}),a.jsx("span",{className:"text-sm",children:r[e]||0})]},e)),(0,a.jsxs)("span",{className:"text-gray-400 text-sm",children:["\uD83D\uDC41️ ",e.views||0]}),(0,a.jsxs)("span",{className:"text-gray-400 text-sm",children:["\uD83D\uDCE5 ",r.jams||e.jams||0]})]}),a.jsx("div",{className:"flex items-center justify-center mt-3 gap-2 flex-wrap",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:e=>N(e),disabled:j||!t,className:`px-3 py-1 text-sm font-medium rounded-full transition-colors border ${g?"border-[#00CEC8] text-[#00CEC8] bg-white opacity-70":"border-[#00CEC8] text-white hover:bg-[#00CEC8] hover:text-pink"}`,children:g?"\uD83C\uDFB5 In Stack":j?"Adding...":"➕ Stack This"}),a.jsx("button",{onClick:e=>S(e),className:"text-sm font-semibold text-[#3FD6CD] border border-[#3FD6CD] px-3 py-1 rounded-full shadow flex-1 text-center",children:"\uD83D\uDD17 Share Jam"})]})}),a.jsx("div",{className:"flex items-center justify-between mt-3 gap-2 flex-wrap",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 w-full",children:[(0,a.jsxs)("div",{className:"text-sm font-semibold text-white border border-[#3FD6CD] px-3 py-1 rounded-full shadow flex-1 text-center",children:["\uD83C\uDFB6 Tickles: ",u??"..."]}),a.jsx("button",{onClick:e=>C(e),className:"px-3 py-1 text-sm rounded-full font-semibold transition bg-[#FFD700] text-black hover:opacity-90 flex-1 text-center",children:"\uD83C\uDF81 Send Tickle"}),a.jsx("button",{onClick:e=>_(e),className:"text-sm font-semibold text-white border border-[#3FD6CD] px-3 py-1 rounded-full shadow flex-1 text-center",children:"\uD83D\uDED2 Buy Tickles"})]})})]})};s()}catch(e){s(e)}})},1842:(e,t,r)=>{"use strict";r.d(t,{O:()=>i});var s=r(2885);let a=process.env.REACT_APP_SUPABASE_URL,l=process.env.REACT_APP_SUPABASE_KEY;if(console.log("Supabase URL:",a),console.log("Supabase Key:",l?"Set (hidden)":"undefined"),!a)throw Error("Supabase URL is required");if(!l)throw Error("Supabase Key is required");let i=(0,s.createClient)(a,l,{global:{headers:{Accept:"application/json"}}})},9314:(e,t,r)=>{"use strict";r.d(t,{x:()=>s});let s={country_roots:{label:"Country & Roots \uD83E\uDD20",color:"amber"},hiphop_flow:{label:"Hip-Hop & Flow \uD83C\uDFA4",color:"purple"},rock_raw:{label:"Rock & Raw \uD83E\uDD18",color:"red"},pop_shine:{label:"Pop & Shine ✨",color:"pink"},spiritual_soul:{label:"Spiritual & Soul ✝️",color:"blue"},comedy_other:{label:"Comedy & Other \uD83D\uDE02",color:"green"}}},7395:(e,t,r)=>{"use strict";r.d(t,{Ow:()=>a,e9:()=>s,zC:()=>l});let s=()=>{},a=()=>{},l=()=>{}},2636:()=>{}};